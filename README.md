
# Test Task for Backend Developer: Node.js Application Using NestJS Framework

## Task Overview
This test task involves creating a Node.js application using the NestJS framework, focusing on the development of a multiple-module application with simple shop and shopping cart functionalities. The task is divided into three main parts:
- **Database Design**
- **Coding**
- **Tests for NestJS** (Optional but nice to have)

## What I Have Done
The following deliverables are completed as part of the task:
1. **Database Schema Design**: I have used a MongoDB database as mentioned in the job description.
2. **Node.js Application Code**: Implemented using the NestJS framework.
3. **Swagger Documentation**: API documentation using Swagger for the backend services.
4. **Dockerfile**: For building the NestJS app container.
5. **docker-compose.yaml**: For starting additional services and the backend app.
6. **Service To Service Communication**: I have used pub/sub for communication between services.
7. **Product and Cart Module**: Created two modules with zero cohesion between them.
8. **Git Repository**: With proper Gitflow and conventional commit messages.
9. **Testing (Optional)**: While testing was not part of the requirements, I focused on ensuring that the core functionality works as expected.

## Module Independence
NestJS modules should be **independent** of each other. For communication between modules, I have used API calls and pub/sub.

## API Endpoints

The following API endpoints are available in the application:

### Product Endpoints
- **GET /products**: Retrieve a list of all products.
- **POST /products**: Create a new product.
    - Request body:
      ```json
      {
        "name": "Product Name",
        "description": "Product Description",
        "image": "Base64 Image String",
        "price": 10.99,
        "stock": 100
      }
      ```
- **GET /products/:id**: Retrieve a single product by ID.
- **PUT /products/:id**: Update an existing product by ID.
    - Request body: Same format as the POST request.
- **DELETE /products/:id**: Remove product by ID from the product list.
- **PUT /products/:id/update-stock**: Update an existing product's stock.

### Shopping Cart Endpoints
- **POST /cart/:userId**: Create a new shopping cart for a user.
- **GET /cart/:userId**: Retrieve a shopping cart by user ID.
- **GET /cart/**: Retrieve all cart details.
- **POST /cart/:id/add-product**: Add a product to the cart.
    - Request body:
      ```json
      {
        "productId": "12345",
        "quantity": 2
      }
      ```
- **PUT /cart/:id/update-quantity**: Update the quantity of a product in the cart.
    - Request body:
      ```json
      {
        "productId": "12345",
        "quantity": 3
      }
      ```
- **DELETE /cart/:id**: Delete the shopping cart.
- **DELETE /cart/:cartId/remove-product/:productId**: Delete a product from the shopping cart.

### Error Handling
- All endpoints return appropriate status codes (e.g., 200 OK, 400 Bad Request, 404 Not Found).
- Error messages are descriptive to help with troubleshooting.

## Git Usage
- Use **Git** for code management.
- Follow the **Gitflow strategy** for branching and merging.
- Use **conventional commit messages** to clearly track code changes.
- Use **feature branches** to separate tasks.

## Docker Setup
The application is **dockerized** for easy setup and deployment. You can use the provided Dockerfile and `docker-compose.yaml` to spin up the application along with any required services.

### Docker Setup Instructions

To run the application with Docker, follow these steps:

1. Clone the repository:

   ```bash
   git clone https://github.com/kpalash37/NestJSAPI.git
   cd NestJSAPI
   ```

2. **Build and start the containers using Docker Compose**:

   ```bash
   docker-compose up --build
   ```

3. The application should now be running at:

   ```
   http://localhost:3000
   ```

4. Swagger Documentation:

   Access the API documentation at:

   ```
   http://localhost:3000/api
   ```

5. MongoDB:

   You can connect to the MongoDB instance at:

   ```
   http://localhost:27017
   http://localhost:8081/
   ```

## Folder Structure

The project is organized as follows:

```
NESTISAPI/
├── dist/                # Compiled output (generated by TypeScript)
├── node_modules/        # NPM dependencies
├── src/                 # Source code
│   ├── common/          # Shared utilities/helpers
│   ├── modules/         # Feature modules
│   │   ├── cart/        # Cart feature module
│   │   │   ├── dtos/    # Data Transfer Objects for cart
│   │   │   ├── cart.controller.ts       # REST API endpoints
│   │   │   ├── cart.service.ts          # Business logic
│   │   │   └── cart.module.ts           # Module configuration
│   │   └── product/     # Product feature module
│   │       ├── dto/     # Data Transfer Objects for product
│   │       ├── product.controller.ts    # REST API endpoints
│   │       ├── product.service.ts       # Business logic
│   │       └── product.module.ts        # Module configuration
│   ├── schemas/         # Database schemas/models (likely MongoDB/Mongoose)
│   ├── app.controller.ts    # Root controller
│   ├── app.module.ts        # Root module
│   └── main.ts              # Application entry point
├── test/               # Test files
├── .env                # Environment variables
├── docker-compose.yml  # Docker container orchestration
├── Dockerfile          # Docker image configuration
├── package.json        # Project dependencies
└── tsconfig.json       # TypeScript configuration
```

---

## Thanks for your time!
---

